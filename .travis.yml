dist: trusty
sudo: required
git:
  depth: 1
language: cpp
matrix:
  include:
  - os: osx
    compiler: clang
    osx_image: xcode10.1
branches:
  only:
  - master
before_install:
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test;
  fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo apt-get -qq update ; fi
- export version="1.0"
install:
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo -E apt-get -yq --no-install-suggests
  --no-install-recommends --force-yes install p7zip-full ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo -E apt-get -yq --no-install-suggests
  --no-install-recommends --force-yes install chrpath ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo -E apt-get -yq --no-install-suggests
  --no-install-recommends --force-yes install openssl libssl-dev ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo -E apt-get -yq --no-install-suggests
  --no-install-recommends --force-yes install libgl1-mesa-dev ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo -E apt-get -yq --no-install-suggests
  --no-install-recommends --force-yes install tree ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo apt-get install -qq gcc-6; sudo
  update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 100 ; fi
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then sudo apt-get install -qq g++-6; sudo
  update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-6 100 ; fi
before_script:
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then chmod +x .travis_linux.sh ; fi
- if [[ "${TRAVIS_OS_NAME}" == "osx" ]]; then chmod +x .travis_macos.sh ; fi
script:
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then CXX="g++-6" CC="gcc-6" ./.travis_linux.sh
  ; fi
- if [[ "${TRAVIS_OS_NAME}" == "osx" ]]; then ./.travis_macos.sh ; fi
deploy:
  provider: releases
  api_key:
    secure: h7u8XulfhbHOODk56K/kbGQhuTEta8UZ1VDLVzpXUFNESv7ImLf+SHXiALBxX9FQDcwvrHbTigA9DLvv/wSN4+pmAK8OmeP0WQEmwKndM77cuPySDtvGxHiJGP5loQ3qsejIyrtcKkCg2OLscJjkJH65HuRCn96Vk/r6ujuRuxNmJZ7nM24rdwK3JZnleKmEgyXBWUJwmpI/eepblRXDvi6344SsWNm/AR3d0ePxyFVq8YBNRZ7J9BWZWBYnbUhZdvGCUpONeKUkOUr8jmGbTJZnB4h3myZQlMp4qSyNW3BKbN3lypR9IAQRf0gqIUwENch2BB29yEhYUndiMrlFidWG/H+kKTQpMljU1QX7rnTLYxrCL3Gfpv4t4uS2RhoQxI4p7lVQv08ODRnkTtUwEaJdXYIMSpXDs3dzNRmwixThTczDa6uSvspzmq43tnnfTPDokeHBfYuEhd/sT9QypP9uSk6Hw8WQJwrMRb0lS2sBwo0KGntPc5NlsiuHAlMm0CJSLhmTKEFR9rYk+p2ZXfiUGu8KuFJyN7TJQ0ZGMEmttDNU96KJx96wiajeebwyr7LCwHKPI8utdt2MAwOLPxJu+OZcQp2uch2o6cqSzQuvv3YM51C67jUL6I/uY04Sm4l6RAVvhC1sWOiWHUsSbgUb7A8z2HQI1iRzo2wMWRw=
  file: ${project_dir}/build/distrib/cjlv-${version}-x64.dmg
  on:
    condition: $TRAVIS_OS_NAME == osx
    repo: missdeer/cjlv
    tags: true
  skip_cleanup: true
